<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="styles/bootstrap.css">
  <title>Collecte info API</title>
</head>
<body>
  <h2>Blockchain info</h2>
  <div class="row">
  	<div class="col-lg-12 col-xs-6">
      	<pre>
          	<code id="blockchaininfo" class="json kljs"></code>
      	</pre>
  	</div>
  </div>

  <h2>Mining info</h2>
  <div class="row">
    <div class="col-lg-12 col-xs-6">
        <pre>
            <code id="mininginfo" class="json kljs"></code>
        </pre>
    </div>
  </div>

  <h2>Peer info</h2>
  <div class="row">
    <div class="col-lg-12 col-xs-6">
        <pre>
            <code id="peerinfo" class="json kljs"></code>
        </pre>
    </div>
  </div>

</body>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="../custom.js"></script>
<script type="text/javascript">homePageLoading();</script>
<script>

function requeteAPI(url,id)
{
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
          var myObj = this.responseText;
          var jsonPretty = JSON.stringify(JSON.parse(myObj),null,2);
          document.getElementById(id).innerHTML = jsonPretty;
      }
  };
  xmlhttp.open("GET", url, true);
  xmlhttp.send();
}

function homePageLoading()
{
  requeteAPI("http://bitcoin.mubiz.com/blockchaininfo","blockchaininfo");
  requeteAPI("http://bitcoin.mubiz.com/mininginfo","mininginfo");
  requeteAPI("http://bitcoin.mubiz.com/peerinfo","peerinfo");
}

homePageLoading();

</script>
</html>
